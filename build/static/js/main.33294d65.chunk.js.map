{"version":3,"sources":["components/Three/Three.js","components/Overlay/Overlay.js","components/TextFlow/TextFlow.js","components/BackDrop/BackDrop.js","App.js","index.js"],"names":["Three","width","window","innerWidth","height","innerHeight","scene","THREE","camera","renderer","alpha","setSize","this","mount","appendChild","domElement","wireframes","startPos","spread","movement","rotation","i","geometry","geo","mat","color","linewidth","wireframe","position","x","y","z","add","push","frustum","setFromProjectionMatrix","multiplyMatrices","projectionMatrix","matrixWorldInverse","easeFunction","rangeMax","rangeMultiplier","pow","floatX","Math","abs","squared","result","onPhoneMotion","event","accelerationIncludingGravity","forEach","wf","test","navigator","userAgent","addEventListener","e","centerX","centerY","centerDistX","clientX","centerDistY","clientY","document","getElementById","onclick","console","log","DeviceMotionEvent","requestPermission","then","response","aspect","updateProjectionMatrix","animate","requestAnimationFrame","containsPoint","props","onAnimate","render","className","ref","Component","Overlay","children","style","fontSize","lineHeight","chunks","join","BackDrop","App","changeBackgroundColour","colour","setState","backgroundColour","getMaxNumLines","handleAnimate","object","oldState","newX","toFixed","newY","text1","unshift","length","state","maxNumLines","parseInt","text2","text3","pop","filter","numTextFlowGroups","bind","backgroundColor","Array","fill","src","id","alt","React","ReactDOM"],"mappings":"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","file":"static/js/main.33294d65.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport * as THREE from \"three\";\nclass Three extends Component {\n  componentDidMount() {\n    var width = window.innerWidth;\n    var height = window.innerHeight;\n    var scene = new THREE.Scene();\n    var camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);\n    var renderer = new THREE.WebGLRenderer({ alpha: true });\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    this.mount.appendChild(renderer.domElement);\n\n    // DEFINE OBJECTS / PARAMETERS\n    let wireframes = [];\n    let numCubes = 100;\n    let startPos = { x: 0, y: 0, z: -200 };\n    let spread = { x: 0, y: 0, z: 4 };\n    let movement = { x: 0, y: 0, z: 0.12 };\n    let rotation = { x: -0.005, y: 0, z: 0.0 };\n    for (var i = 0; i < numCubes; i++) {\n      var geometry = new THREE.CubeGeometry(15, 10, 10);\n      var geo = new THREE.EdgesGeometry(geometry);\n      var mat = new THREE.LineBasicMaterial({\n        color: 0xff7ff8,\n        linewidth: 2,\n      });\n      var wireframe = new THREE.LineSegments(geo, mat);\n\n      wireframe.position.x = startPos.x + spread.x * i;\n      wireframe.position.y = startPos.y + spread.y * i;\n      wireframe.position.z = startPos.z + spread.z * i;\n\n      scene.add(wireframe);\n      wireframes.push(wireframe);\n    }\n\n    // --------\n\n    // UTIL/TRANSFORM STUFF\n    var frustum = new THREE.Frustum();\n    frustum.setFromProjectionMatrix(\n      new THREE.Matrix4().multiplyMatrices(\n        camera.projectionMatrix,\n        camera.matrixWorldInverse\n      )\n    );\n\n    const onMouseMove = (x, y) => {\n      wireframes.forEach((wf) => {\n        wf.position.y = easeFunction(y, height / 2, 0.5, 1.3);\n        wf.position.x = easeFunction(x, width / 2, 0.5, 1.3);\n      });\n    };\n\n    // pow changes the shape of the curve - higher pow = higher accelleration towards 0 and 1\n    // rangeMultiplier is applied at the end, so it just returns something between 0 and 1 * range multiplier\n    // rangeMax is used to convert x into a float between -1 and 1\n    const easeFunction = (x, rangeMax, rangeMultiplier = 1, pow = 2) => {\n      let floatX = Math.abs(x / rangeMax);\n      let squared = Math.pow(floatX, pow);\n      let result = squared / (squared + Math.pow(1 - floatX, pow));\n      return x > 0 ? rangeMultiplier * result : -(rangeMultiplier * result);\n    };\n    const logKey = (e) => {\n      let centerX = width / 2;\n      let centerY = height / 2;\n      let centerDistX = e.clientX - centerX;\n      let centerDistY = centerY - e.clientY;\n      onMouseMove(centerDistX, centerDistY);\n    };\n    const onPhoneMotion = (event) => {\n      // const { alpha, beta, gamma } = event;\n      // console.log(alpha, beta, gamma);\n      // console.log(event);\n      // let x = alpha + gamma;\n      // let y = beta;\n      const { accelerationIncludingGravity } = event;\n      let x = accelerationIncludingGravity.x;\n      let y = accelerationIncludingGravity.y + accelerationIncludingGravity.z;\n      wireframes.forEach((wf) => {\n        wf.position.y = easeFunction(x % 720, 720, 1, 1.3);\n        wf.position.x = easeFunction(y % 360, 360, 1, 1.3);\n      });\n    };\n    if (\n      /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n        navigator.userAgent\n      )\n    ) {\n      // show the enable motion button\n      // window.addEventListener(\"deviceorientation\", onPhoneMotion);\n    } else {\n      window.addEventListener(\"mousemove\", logKey);\n    }\n\n    const requestMotionPermission = () => {\n      if (\n        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n          navigator.userAgent\n        )\n      ) {\n        console.log(\"requestMotionPermission called - requesting permission\");\n        // this is true if there is device motion stuff\n        //const isMotionPossible = window.DeviceMotionEvent && typeof window.DeviceMotionEvent.requestPermission === \"function\";\n\n        // if (isMotionPossible) {\n        DeviceMotionEvent.requestPermission().then((response) => {\n          console.log(\"adding listener - response:\", response);\n          // do stuff here when permission is accepted\n          // listener on the motion event :)\n          window.addEventListener(\"devicemotion\", onPhoneMotion, true);\n        });\n        // }\n      } else {\n        console.log(\"not a phone, not reuqesting permission\");\n      }\n    };\n\n    document.getElementById(\"gif\").onclick = requestMotionPermission;\n\n    // ---------\n\n    camera.position.z = 0;\n\n    var animate = () => {\n      requestAnimationFrame(animate);\n\n      // DO STUFF\n      wireframes.forEach((wf) => {\n        wf.position.x += movement.x;\n        wf.position.y += movement.y;\n        wf.position.z += movement.z;\n        wf.rotation.x += rotation.x;\n        wf.rotation.y += rotation.y;\n        wf.rotation.z += rotation.z;\n        if (!frustum.containsPoint(wf.position)) {\n          // If they've moved out of the field of view, put them back to startpos\n          wf.position.x = startPos.x;\n          wf.position.y = startPos.y;\n          wf.position.z = startPos.z;\n        }\n      });\n      //-------\n\n      this.props.onAnimate(wireframes[0]);\n\n      renderer.render(scene, camera);\n    };\n\n    // keep the canvas responsive\n    window.addEventListener(\"resize\", () => {\n      width = window.innerWidth;\n      height = window.innerHeight;\n      renderer.setSize(width, height);\n      camera.aspect = width / height;\n      camera.updateProjectionMatrix();\n    });\n\n    animate();\n  }\n  render() {\n    return (\n      <div>\n        <div className=\"fatCanvas\" ref={(ref) => (this.mount = ref)} />\n      </div>\n    );\n  }\n}\nexport default Three;\n","import React from \"react\";\n\nconst Overlay = (props) => {\n  return (\n    <div>\n      <div className=\"overLay\">{props.children}</div>\n    </div>\n  );\n};\n\nexport default Overlay;\n","import React from \"react\";\n\nimport \"./TextFlow.css\";\n\nconst Overlay = (props) => {\n  return (\n    <div className={`textFlow flexCol fullHeight ${props.className || \"\"}`}>\n      <p style={{ fontSize: props.lineHeight, lineHeight: props.lineHeight }}>\n        {props.chunks.join(\" \")}\n      </p>\n    </div>\n  );\n};\n\nexport default Overlay;\n","import React from \"react\";\n\nimport \"./BackDrop.css\";\n\nconst BackDrop = (props) => {\n  const { style } = props;\n  return (\n    <div className=\"backDrop\" style={style}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default BackDrop;\n","import React from \"react\";\n\nimport Three from \"./components/Three/Three\";\nimport OverLay from \"./components/Overlay/Overlay\";\nimport TextFlow from \"./components/TextFlow/TextFlow\";\nimport BackDrop from \"./components/BackDrop/BackDrop\";\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    const lineHeight = 12;\n    const numTextFlowGroups = 3;\n    this.state = {\n      text1: [],\n      text2: [],\n      text3: [],\n      backgroundColour: \"rgb(0,0,0)\",\n      maxNumLines: this.getMaxNumLines(lineHeight),\n      lineHeight,\n      numTextFlowGroups,\n    };\n\n    this.changeBackgroundColour = this.changeBackgroundColour.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", () => {\n      this.setState({\n        maxNumLines: this.getMaxNumLines(this.state.lineHeight),\n      });\n    });\n  }\n\n  changeBackgroundColour = (colour) =>\n    this.setState({ backgroundColour: colour });\n\n  getMaxNumLines = (lineHeight) => {\n    return window.innerHeight / lineHeight;\n  };\n\n  handleAnimate = (object) => {\n    this.setState((oldState) => {\n      let newX = `x:_${object.position.x.toFixed(3)}`;\n      let newY = `y:_${object.position.y.toFixed(3)}`;\n      oldState.text1.unshift(\n        oldState.text1.length >= this.state.maxNumLines - 2 &&\n          oldState.text1[parseInt(this.state.maxNumLines * 0.75)] === newX\n          ? \"idle\"\n          : newX\n      );\n      oldState.text2.unshift(\n        oldState.text2.length >= this.state.maxNumLines - 2 &&\n          oldState.text2[parseInt(this.state.maxNumLines * 0.75)] === newY\n          ? \"idle\"\n          : newY\n      );\n\n      oldState.text3.unshift(`z:_${object.position.z.toFixed(3)}`);\n\n      if (oldState.text1.length > this.state.maxNumLines + 1) {\n        oldState.text1.pop();\n        oldState.text2.pop();\n        oldState.text3.pop();\n      }\n      return oldState;\n    });\n    if (this.state.text1.filter((i) => i === \"idle\").length === 0) {\n      this.changeBackgroundColour(\"rgb(255,255,255)\");\n    } else {\n      this.changeBackgroundColour(\"rgb(0,0,0)\");\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <Three onAnimate={this.handleAnimate} />\n\n        <BackDrop style={{ backgroundColor: this.state.backgroundColour }}>\n          <div className=\"flexRow fullWidth spaceBetween\">\n            {Array(this.state.numTextFlowGroups).fill([\n              <TextFlow\n                chunks={this.state.text1}\n                lineHeight={`${this.state.lineHeight}px`}\n              />,\n              <TextFlow\n                chunks={this.state.text2}\n                lineHeight={`${this.state.lineHeight}px`}\n              />,\n              <TextFlow\n                chunks={this.state.text3}\n                lineHeight={`${this.state.lineHeight}px`}\n              />,\n            ])}\n          </div>\n        </BackDrop>\n        <OverLay>\n          <div className=\"flexRow fullWidth justifyCenter\">\n            <img src=\"/images/computer-love.gif\" id=\"gif\" alt=\"fucc\" />\n          </div>\n        </OverLay>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}